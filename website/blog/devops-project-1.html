<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploying a Java App and Setting Up Nexus on DigitalOcean | Noah Vastola</title>
    <meta name="description" content="What I learned the hard way about Gradle compatibility, architecture mismatches, and blob store cleanup when deploying my first cloud server and artifact repository">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0e1a;
            --bg-secondary: #111827;
            --bg-tertiary: #1a2332;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --accent-blue: #3b82f6;
            --accent-cyan: #06b6d4;
            --accent-green: #10b981;
            --accent-yellow: #fbbf24;
            --accent-red: #ef4444;
            --border-color: #2d3748;
            --card-bg: #1e293b;
            --code-bg: #1a1a1a;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        /* Navigation */
        nav {
            background: rgba(26, 35, 50, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s;
            font-weight: 500;
        }

        .nav-link:hover {
            color: var(--accent-cyan);
        }

        /* Article Header */
        .article-header {
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 2rem 2rem;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }

        .breadcrumb a {
            color: var(--accent-cyan);
            text-decoration: none;
            transition: color 0.3s;
        }

        .breadcrumb a:hover {
            color: var(--accent-blue);
        }

        .article-header h1 {
            font-size: 2.8rem;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .article-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
        }

        .meta-item i {
            color: var(--accent-cyan);
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
            padding: 0.4rem 0.9rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        /* Article Content */
        .article-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .article-body {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 3rem;
        }

        .article-body h2 {
            font-size: 2rem;
            margin: 2.5rem 0 1.5rem;
            color: var(--text-primary);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-cyan);
        }

        .article-body h2:first-child {
            margin-top: 0;
        }

        .article-body h3 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: var(--accent-cyan);
        }

        .article-body h4 {
            font-size: 1.2rem;
            margin: 1.5rem 0 1rem;
            color: var(--text-primary);
        }

        .article-body p {
            margin-bottom: 1.5rem;
            line-height: 1.9;
            color: var(--text-secondary);
        }

        .article-body strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .article-body ul, .article-body ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }

        .article-body li {
            margin-bottom: 0.75rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .article-body ul li::marker {
            color: var(--accent-cyan);
        }

        /* Code Blocks */
        .article-body code {
            background: var(--code-bg);
            color: var(--accent-green);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .article-body pre {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .article-body pre code {
            background: none;
            padding: 0;
            color: var(--accent-green);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Blockquotes */
        .article-body blockquote {
            border-left: 4px solid var(--accent-cyan);
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: var(--text-secondary);
        }

        /* Images */
        .article-body img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 2rem 0;
            border: 1px solid var(--border-color);
        }

        /* Callout Boxes */
        .callout {
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid var(--accent-blue);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
        }

        .callout.success {
            background: rgba(16, 185, 129, 0.05);
            border-left-color: var(--accent-green);
        }

        .callout.warning {
            background: rgba(251, 191, 36, 0.05);
            border-left-color: var(--accent-yellow);
        }

        .callout.error {
            background: rgba(239, 68, 68, 0.05);
            border-left-color: var(--accent-red);
        }

        .callout-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .callout.success .callout-title { color: var(--accent-green); }
        .callout.warning .callout-title { color: var(--accent-yellow); }
        .callout.error .callout-title { color: var(--accent-red); }
        .callout .callout-title { color: var(--accent-blue); }

        /* Table */
        .article-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: var(--bg-tertiary);
            border-radius: 8px;
            overflow: hidden;
        }

        .article-body th {
            background: var(--bg-secondary);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--accent-cyan);
            border-bottom: 2px solid var(--border-color);
        }

        .article-body td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .article-body tr:last-child td {
            border-bottom: none;
        }

        /* Footer Navigation */
        .article-footer {
            max-width: 900px;
            margin: 3rem auto 0;
            padding: 2rem;
        }

        .back-to-blog {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-to-blog:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        /* Related Posts */
        .related-posts {
            max-width: 900px;
            margin: 4rem auto 0;
            padding: 0 2rem 4rem;
        }

        .related-posts h3 {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--text-primary);
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .related-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s;
            text-decoration: none;
            display: block;
        }

        .related-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-cyan);
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.15);
        }

        .related-card h4 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .related-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .article-header h1 {
                font-size: 2rem;
            }

            .article-body {
                padding: 2rem;
            }

            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .article-body h2 {
                font-size: 1.6rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-links">
                <a href="../blog.html" class="nav-link">
                    <i class="fas fa-arrow-left"></i> All Posts
                </a>
                <a href="../index.html" class="nav-link">
                    <i class="fas fa-home"></i> Portfolio
                </a>
            </div>
        </div>
    </nav>

    <!-- Article Header -->
    <header class="article-header">
        <div class="breadcrumb">
            <a href="../index.html">Home</a>
            <i class="fas fa-chevron-right"></i>
            <a href="../blog.html">Blog</a>
            <i class="fas fa-chevron-right"></i>
        </div>

        <h1>Deploying a Java App and Setting Up Nexus on DigitalOcean</h1>

        <div class="article-meta">
            <div class="meta-item">
                <i class="fas fa-calendar"></i>
                <span>February 10, 2026</span>
            </div>
            <div class="meta-item">
                <i class="fas fa-clock"></i>
                <span>8 min read</span>
            </div>
            <div class="meta-item">
                <i class="fas fa-user"></i>
                <span>Noah Vastola</span>
            </div>
        </div>

        <div class="tags">
            <span class="tag">DigitalOcean</span>
            <span class="tag">Linux</span>
            <span class="tag">Java</span>
            <span class="tag">Gradle</span>
        </div>
    </header>

    <!-- Article Content -->
    <main class="article-content">
        <article class="article-body">

            <!-- PROJECT 1 -->
            <h2>Deploy a Java Application to DigitalOcean</h2>

            <h3>The Goal</h3>
            <ul>
                <li>Set up a cloud server from scratch</li>
                <li>Deploy a Java application</li>
                <li>Configure security properly (least privilege principle)</li>
            </ul>

            <p>Sounds straightforward, right? Well...</p>

            <h3>Spinning Up My First Cloud Server</h3>

            <p>
                I started by creating a Droplet on DigitalOcean with the bare minimum specs since I'm paying out of pocket 
                for this learning journey: Ubuntu with 512 MB RAM, 10 GB storage, 1 CPU, and the region closest to me for 
                lower latency.
            </p>

            <p>
                For authentication, I pasted my SSH public key (from <code>~/.ssh/id_rsa.pub</code>) into DigitalOcean during 
                setup. This is way more secure than password authentication and it means I don't have to type a password every 
                time I connect.
            </p>

            <p>
                I configured the firewall to only allow SSH (port 22) from my computer's public IP. Then I connected:
            </p>

            <pre><code>ssh root@&lt;server-ip&gt;</code></pre>

            <p>And boom—I was in. First cloud server: check.</p>

            <h3>The First Reality Check: Building the Application</h3>

            <p>
                This is where things got interesting. The project uses a Java Gradle application from Nana's GitLab repository. 
                I opened it in IntelliJ, hit build, and... nothing. The Gradle build failed immediately.
            </p>

            <div class="callout error">
                <div class="callout-title">
                    <i class="fas fa-times-circle"></i> First Error: Gradle 8 Compatibility
                </div>
                <p>
                    The error message was cryptic at first, but after some digging, I figured out the problem: Gradle 8 doesn't 
                    support the version of Spring Boot the project was using (2.7.x). Apparently, Gradle 8 removed something 
                    called JavaPluginConvention that older Spring Boot versions relied on.
                </p>
            </div>

            <p>
                I'd never heard of SDKMAN before this, but after some Googling, I learned it's a tool for managing different 
                versions of Java development tools. I installed it and downgraded to Gradle 7.6.4:
            </p>

            <pre><code>sdk install gradle 7.6.4
sdk use gradle 7.6.4</code></pre>

            <p>Problem solved, right? Nope.</p>

            <div class="callout error">
                <div class="callout-title">
                    <i class="fas fa-times-circle"></i> Second Error: Java Version Mismatch
                </div>
                <p>
                    Now Gradle was complaining about my Java version. I was running Java 21, but Gradle 7.6.4 doesn't support 
                    anything past Java 19. The error was something about "class file major version 65" which I later learned 
                    meant Java 21.
                </p>
            </div>

            <p>So I had to install Java 17:</p>

            <pre><code>sudo apt update
sudo apt install openjdk-17-jdk</code></pre>

            <div class="callout warning">
                <div class="callout-title">
                    <i class="fas fa-exclamation-triangle"></i> Important Lesson About Java Versions
                </div>
                <p>
                    Here's where I learned something really important about how Java versions work on Linux: having multiple 
                    Java versions installed doesn't automatically mean Gradle will use the right one.
                </p>
                <p style="margin-bottom: 0;">
                    I had to manually tell the system which Java version to use with update-alternatives:
                </p>
            </div>

            <pre><code>sudo update-alternatives --config java</code></pre>

            <p>
                This showed me a list of installed Java versions, and I selected Java 17.
            </p>

            <div class="callout">
                <div class="callout-title">
                    <i class="fas fa-info-circle"></i> IntelliJ vs System Java
                </div>
                <p>
                    Here's the kicker: I initially thought that setting the JDK in IntelliJ's project structure would fix this. 
                    It didn't. <strong>IntelliJ's JVM settings only affect IntelliJ itself.</strong> When you run Gradle from 
                    the terminal, it uses whatever <code>java</code> command points to in your system PATH. Those are completely 
                    separate things.
                </p>
            </div>

            <p>
                Finally, the build worked. I got my <code>.jar</code> file in the <code>build/libs/</code> folder, and I was 
                ready to deploy.
            </p>

            <h3>Getting the Application onto the Server</h3>

            <p>
                With the JAR file built, I used <code>scp</code> (secure copy) to transfer it to my DigitalOcean server:
            </p>

            <pre><code>scp build/libs/myapp.jar root@&lt;server-ip&gt;:~/</code></pre>

            <p>Then I SSH'd back into the server and ran the application:</p>

            <pre><code>java -jar myapp.jar</code></pre>

            <p>
                The app started up and told me it was running on port 7071. Great!
            </p>

            <p>
                I opened my browser and tried to access <code>http://&lt;server-ip&gt;:7071</code> and... nothing. Connection timeout.
            </p>

            <p>
                Oh right. The firewall. I had only opened port 22 for SSH. I needed to add a rule for port 7071.
            </p>

            <p>
                Back in the DigitalOcean dashboard, I added a custom inbound rule to allow traffic on port 7071 from all IPs. 
                Refreshed the browser, and there it was—my application running on a cloud server for the first time.
            </p>

            <div class="callout success">
                <div class="callout-title">
                    <i class="fas fa-check-circle"></i> First Success
                </div>
                <p>
                    That feeling when you see your app running on someone else's computer halfway across the world never gets old.
                </p>
            </div>

            <h3>Security: Don't Run Apps as Root</h3>

            <p>
                This is where the project taught me about the <strong>principle of least privilege</strong>. Running applications 
                as the root user is a terrible security practice. If your application gets compromised, an attacker has full 
                control of the entire server.
            </p>

            <p>The solution: create a dedicated user for each application.</p>

            <pre><code>adduser appuser</code></pre>

            <p>
                I set a password, entered a full name, and skipped through the other prompts (room number, work phone, etc.—who 
                fills those out?).
            </p>

            <p>
                Then I added the new user to the sudo group so they could perform administrative tasks when needed:
            </p>

            <pre><code>usermod -aG sudo appuser</code></pre>

            <p>I switched to the new user to test it:</p>

            <pre><code>su - appuser</code></pre>

            <p>And tried to SSH into the server as this user:</p>

            <pre><code>ssh appuser@&lt;server-ip&gt;</code></pre>

            <p>Permission denied.</p>

            <h3>The SSH Key Problem</h3>

            <p>
                Right. I had set up SSH key authentication for the root user, but not for my new user. The SSH key was sitting 
                in <code>/root/.ssh/authorized_keys</code>, which the new user didn't have access to.
            </p>

            <p>I had to manually create the SSH directory structure for the new user:</p>

            <pre><code>sudo mkdir -p /home/appuser/.ssh
sudo nano /home/appuser/.ssh/authorized_keys</code></pre>

            <p>I pasted my public key in there, saved the file, and set the proper permissions:</p>

            <pre><code>sudo chmod 700 /home/appuser/.ssh
sudo chmod 600 /home/appuser/.ssh/authorized_keys
sudo chown -R appuser:appuser /home/appuser/.ssh</code></pre>

            <div class="callout warning">
                <div class="callout-title">
                    <i class="fas fa-exclamation-triangle"></i> SSH Permissions Matter
                </div>
                <p>
                    Those permissions are important. SSH won't accept the key if the <code>.ssh</code> directory or the 
                    <code>authorized_keys</code> file are too permissive.
                </p>
            </div>

            <p>I exited the server completely and tried again:</p>

            <pre><code>ssh appuser@&lt;server-ip&gt;</code></pre>

            <p>No password prompt. Success.</p>

            <p>
                Now I could run the application as this non-root user, and if something went wrong with the app, the damage 
                would be contained.
            </p>

            <h2>What I Learned</h2>

            <p>
                This project taught me several things that aren't obvious from just reading documentation:
            </p>

            <ul>
                <li>
                    <strong>Version compatibility matters more than you think.</strong> Gradle, Java, and Spring Boot all have 
                    to play nice together. Upgrading one without checking the others can break everything.
                </li>
                <li>
                    <strong>IntelliJ's JDK settings ≠ your terminal's Java version.</strong> They're completely separate. 
                    IntelliJ uses its configured JDK for its own processes, but when you run Gradle from the terminal, it 
                    uses whatever the system PATH points to.
                </li>
                <li>
                    <strong>Firewalls exist in cloud environments.</strong> Coming from a local development background, I 
                    wasn't used to thinking about firewall rules. In the cloud, you have to explicitly allow traffic on every 
                    port you want to use.
                </li>
                <li>
                    <strong>SSH key authentication is per-user.</strong> You can't just set up SSH keys for root and expect 
                    them to work for other users. Each user needs their own <code>authorized_keys</code> file.
                </li>
                <li>
                    <strong>Security isn't just a checkbox at the end.</strong> Creating separate users for applications, 
                    using SSH keys instead of passwords, limiting firewall rules—these should be part of the initial setup, 
                    not an afterthought.
                </li>
            </ul>

            <h2>What's Next</h2>

            <p>
                This was just the first project. Next up, I'm setting up Nexus Repository Manager on the same DigitalOcean 
                server and learning how to publish artifacts to it. I'm expecting more version conflicts, more firewall headaches, 
                and probably some new surprises I haven't thought of yet.
            </p>

            <p>
                But that's the whole point of this journey. Every time something breaks, I learn something new about how these 
                systems actually work.
            </p>

            <blockquote>
                If you're following along or doing something similar, feel free to reach out. I'd love to hear about your own 
                "wait, why isn't this working?" moments.
            </blockquote>

        </article>
    </main>

    <!-- Footer Navigation -->
    <footer class="article-footer">
        <a href="../blog.html" class="back-to-blog">
            <i class="fas fa-arrow-left"></i> Back to All Posts
        </a>
    </footer>

    <!-- Related Posts -->
    <section class="related-posts">
        <h3>Up Next in the Series</h3>
        <div class="related-grid">
            <a href="devops-project-2.html" class="related-card">
                <h4>Setting Up Nexus Repository Manager</h4>
                <p>Installing Nexus from scratch, configuring blob stores, and publishing artifacts...</p>
            </a>
            <!-- <a href="#" class="related-card">
                <h4>Building My First CI/CD Pipeline with Jenkins</h4>
                <p>Coming soon: From pipeline syntax errors to webhook configurations...</p>
            </a>
            <a href="#" class="related-card">
                <h4>Infrastructure as Code with Terraform</h4>
                <p>Coming soon: Automating infrastructure provisioning and learning why state files matter...</p>
            </a> -->
        </div>
    </section>

    <script>
        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Nav shadow on scroll
        const nav = document.querySelector('nav');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 100) {
                nav.style.boxShadow = '0 2px 20px rgba(0,0,0,0.3)';
            } else {
                nav.style.boxShadow = 'none';
            }
        });
    </script>
</body>
</html>